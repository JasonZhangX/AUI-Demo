define(["jquery","AX","ScreenTest"],function(t,o,e){"use strict";var s=(o.Util.log,{}),i={fixedClass:"fixed-top",fixBottomClass:"fixed-bottom",scrollTop:100,topFixedPos:20,$container:t(".pure-content"),contentPadding:60},n=t(window),a=function(t){var o,e=t.parent();return o=n.width()-(e.offset().left+e.outerWidth()-e.css("padding-left")),Math.floor(o)},r=function(t){return t.parent().width()},c=function(t){return t.parent().height()},l=function(t,o,e,i){var i=i||r(t),e=e||a(t),o=o||s.topFixedPos;t.data("width",i),t.hasClass(s.fixBottomClass)?(t.removeData("top"),t.data("bottom",0)):(t.removeData("bottom"),t.data("top",o))},d=function(t){var o=t.data();o.hasOwnProperty("bottom")?o.top="":o.bottom="",t.css(o)},f=function(t){t.css({top:"",width:"",height:"",bottom:""})},h=function(t){t.parent().height(s.$container.height()),t.parent().css("position","relative")},p=function(t){t.parent().css({height:"auto",position:"static"})},u=function(o,i){s.scrollTop=i||s.scrollTop,l(o);var a=(n.height(),c(o),t(".footer").outerHeight());n.on("scroll.fixtop",function(){var r=n.scrollTop(),c=t(document).height(),u=r+o.height(),m=u>c-a-s.contentPadding;m&&e.screen.bIsDesktopMode?h(o):p(o),r>=i&&!m?(o.removeClass(s.fixBottomClass),o.addClass(s.fixedClass),l(o),d(o)):m?(o.removeClass(s.fixedClass),o.addClass(s.fixBottomClass),l(o),d(o)):(o.removeClass(s.fixBottomClass),o.removeClass(s.fixedClass),f(o))}).on("resize.fixtop",function(){l(o),d(o)})},m=function(o){s=t.extend({},i,o)};return{init:m,scrollToFixed:u}});