<<<<<<< HEAD
<<<<<<< HEAD
define(["jquery","AX","FastClick","AccordianMenu","ScreenTest","AutoScroll","Tab","Dialog","AutoHeight","TemporaryHide","MobileDetect","QRcodeGen","Webchat"],function(n,t,e,o,i,r,a,c,s,u,l,d,f){"use strict";var h={AJAXRequestPrefix:"api-"},v=!1,p=!1,m=!1,g=window,y=document,C=n(g),w=n(y),b=n("body"),x=t.Util.log,k=function(){i.init(),v=i.screen.bIsMobileMode,p=i.screen.bIsTabletMode,m=i.screen.bIsDesktopMode;var n=i.add;return{add:n}}(),A=function(){var t={},e={selector:".auto-height"},o=function(){n.each(i,function(){this.update()})},i=[],r=function(o){t=n.extend({},e,o),n(t.selector).each(function(){var n=new s(this);i.push(n)})};return{update:o,init:r}}(),S=function(){var n=function(){b.hasClass("no-scroll")||b.addClass("no-scroll")},t=function(){b.hasClass("no-scroll")&&b.removeClass("no-scroll")},e=function(){};return{noScroll:n,scroll:t,init:e}}();!function(){var t=new l(g.navigator.userAgent),e=!!t.version("MicroMessenger");e||m||n("#footer-weixin-id").attr("href","#weixinQRcodeDialog").attr("data-toggle","dialog")}();var $=function(){var t,e=n(".header"),o={autoHideHeight:150},i=function(){e.addClass("hide")},r=function(){e.removeClass("hide")},a=function(){var n=new l(g.navigator.userAgent),t=!!n.version("MicroMessenger");return"AndroidOS"===n.os()&&t}(),c=function(n){if(!m){var t=C.scrollTop();n>0?t>=o.autoHideHeight&&i():r()}},s=function(){a&&(e.removeClass("scroll"),e.next(".content").css("margin-top",87))},u=function(){a&&(e.addClass("scroll"),e.next(".content").css("margin-top",0))},d=function(){t=C.scrollTop(),C.on("scroll",function(){var n=C.scrollTop(),e=n-t;return 0===e?!1:(c(e),void(t=n))})},f=function(){a?u():d()};return f(),{fixed:s,scroll:u}}(),U=function(){var t={},e={openCall:null,closeCall:null},o=n(".search-panel"),i=(n(".top-nav .search .icon"),function(){return o.hasClass("show")?a():r(),!1}),r=function(){m&&n("#searchInput").trigger("focus"),o.addClass("show"),$.fixed(),S.noScroll(),t.openCall&&t.openCall()},a=function(){o.removeClass("show"),n(".nav").hasClass("show")||$.scroll(),S.scroll(),t.closeCall&&t.closeCall()},c=function(){m&&a()},s=function(o){t=n.extend({},e,o),w.on("click",".search,.search-cancel a",i),w.on("blur","#searchInput",c)};return{open:r,close:a,init:s}}(),q=function(){var t={},e={beforeSearch:null,$input:n("#searchInput"),searchRequestUrl:"/searchresults/?query="},o=function(n){var t=/^\s+$/g;return t.test(n)||""===n},i=function(){var n=t.$input.val();if(!o(n)){var e=t.searchRequestUrl+encodeURIComponent(n);t.beforeSearch&&t.beforeSearch(n),g.location=e}},r=function(){C.on("keyup",function(n){"13"==n.keyCode&&i()})},a=function(o){t=n.extend({},e,o),r()};return{init:a}}(),_=function(){var e=function(){this.defaults={keywordCountLimit:10,localDataName:"searchHistory",$container:n(".search-history ul"),$clearButton:n(".search-history .clear-btn"),searchRequestUrl:"/searchresults/?query="},this.template='<li><a class="text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a><i class="icon icon-close"></i></li>'};e.prototype.init=function(t){this.config=n.extend({},this.defaults,t),this.bind(),this.update()},e.prototype.update=function(){this._fGetLocalKeywords(),this.render()},e.prototype.render=function(){var e="",o=this,i=this._fGetLocalKeywords();n.each(i,function(){e+=t.Util.Template(o.template,{url:o.config.searchRequestUrl+encodeURIComponent(this),keyword:this})}),this.config.$container.empty(),this.config.$container.append(e)},e.prototype._find=function(t){var e=this._fGetLocalKeywords();return n.inArray(t,e)},e.prototype.save=function(n){if(-1==this._find(n)){var e=this._fGetLocalKeywords();e.length<this.config.keywordCountLimit?e.unshift(n):(e.pop(),e.unshift(n)),t.Storage.set(this.config.localDataName,e),this.update()}},e.prototype.clearAll=function(n){var e=n.data;return t.Storage.clear(e.config.localDataName),e.update(),!1},e.prototype.remove=function(t){var e=t.data,o=n(t.target).prev("a"),i=o.attr("title");return e.del(i),!1},e.prototype.del=function(n){var e=this._find(n);if(-1!==e){var o=this._fGetLocalKeywords();o.splice(e,1),t.Storage.set(this.config.localDataName,o),this.update()}},e.prototype.bind=function(){var n=this;w.on("click",n.config.$clearButton.selector,n,n.clearAll),n.config.$container.on("click",".icon-close",n,n.remove)},e.prototype._fGetLocalKeywords=function(){return t.Storage.get(this.config.localDataName)||[]};var o=new e,i=function(){o.init()},r=function(n){o.save(n)};return{save:r,init:i}}(),R=function(){var e={},o={$container:n(".search-panel .hot-tag"),requestUrl:"/"+h.AJAXRequestPrefix+"hotkeywords",requestParam:"topK",keywordsCount:9,searchUrl:"/searchresults/?query=",template:'<a class="btn btn-link btn-default text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a>'},i=function(o){var i="";return n.each(o,function(){var n=this,o=e.searchUrl+encodeURIComponent(n);i+=t.Util.Template(e.template,{url:o,keyword:n})}),i},r=function(n){e.$container.empty(),e.$container.append(n)},a=function(){var t={};t[e.requestParam]=e.keywordsCount,n.ajax({url:e.requestUrl,method:"POST",data:t,dataType:"json"}).done(function(n){r(i(n))}).fail(function(n){x("Get top search keywords failed.")})},c=function(t){e=n.extend({},o,t),a()};return{init:c}}(),T=function(){var t=n(".nav"),e=n(".nav > ul > li > a"),o=t.find(".sub-menu"),i=function(){return t.hasClass("show")?c():r(),!1},r=function(){t.addClass("show"),$.fixed(),U.close(),S.noScroll()},a=function(){t.removeClass("show"),e.removeClass("active")},c=function(){a(),$.scroll(),S.scroll()},s=function(){return 0==!n(this).next(".sub-menu").length?(e.removeClass("active"),n(this).addClass("active"),o.removeClass("show"),n(this).next(".sub-menu").addClass("show"),S.noScroll(),!1):void 0},u=function(){m&&(e.removeClass("active"),o.removeClass("show"),c(),S.scroll())},l=function(){o.find("dl").each(function(){var t=n(this),e=t.find("dt").length;e%2&&t.addClass("odd-child"),d(t)})},d=function(){o.find(".menu-child").each(function(){var t=n(this);t.on("mousewheel",function(t){if(n(this).hasClass("scrollable")){var e=t.originalEvent,o=e.wheelDelta||-e.detail;this.scrollTop+=30*(0>o?1:-1),t.preventDefault()}})})},f=function(){n(this).prev("dt").toggleClass("mouse-hover")},h=function(){var t=n(this).prev("dt").find("a").attr("href");return g.location=t,!1},v=function(){var n=g.location.href,e={"/home/features/":"product","/pricing/":"price","/solutions/":"solutions","/partnerancasestudy/":"partnerAndCase","/isv-plan/":"partnerAndCase","/starter-guide/":"document","/video-center/":"document","/documentation/":"document","/develop/":"document","/blog/":"community","/community/":"community","/support/":"support","/icp/":"support","/projectoxford/":"projectoxford"},o=function(){for(var t in e)if(n.indexOf(t)>-1)return e[t]};o()?t.find(".nav-"+o()).addClass("current"):t.find(".nav-index").addClass("current")},p=function(){w.on("click",".nav-toggle",i),w.on("click",".nav > ul > li > a",s),w.on("click",".content, .footer ",u),w.on("mouseover",".nav .sub-menu dl dd",f),w.on("mouseout",".nav .sub-menu dl dd",f),w.on("click",".nav .sub-menu dl dd",h),l(),d(),v()};return{hide:a,open:r,close:c,init:p}}(),D=function(){var t=[],e=function(){n.each(t,function(){this.update()})},o=function(){n(".auto-scroll").each(function(n,e){var o=new r(this);t.push(o)})};return{update:e,init:o}}(),I=function(){var t={},e={$tabNav:n(".tab-nav")},o=function(o){t=n.extend({},e,o),t.$tabNav.each(function(){var t=new a(n(this));t.init()})};return{init:o}}(),M=function(){var t=function(){n('[data-toggle="dialog"]').each(function(){var t=new c(n(this));t.init()})};return{init:t}}(),L=function(){var n=function(){m||e.attach(y.body)};return{init:n}}(),G=function(){var t=[],e=function(){for(var n=0;n<t.length;n++)t[n].render()},i=function(){n(".accordian-menu").each(function(e,i){var r={$container:n(i)},a=new o;a.init(r),t.push(a)})};return{init:i,update:e}}(),H=function(){var t={rules:[[n(".header .nav .nav-partnerAndCase"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_video_center"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_icp"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-calculator-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-casestudy-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-icp-id"),"hidden-xs hidden-sm"]]},e=function(){var n=new u;n.init(t)};return{init:e}}(),K=function(){var t=function(){var t=g.location.href;return t.match(/^((?!\/pricing\/calculator|\/icp\/|\/video-center\/|\/partnerancasestudy\/).)*$/)?new d:void n(".common-sidebar").hide()};return{init:t}}();return{init:function(){n(y).ready(function(){n(".header .nav").removeClass("loading")}),S.init(),U.init({openCall:T.hide}),T.init(),D.init(),G.init(),A.init(),_.init(),R.init(),q.init({beforeSearch:function(n){_.save(n)}}),I.init(),M.init(),k.add(D.update),k.add(A.update),k.add(G.update),L.init(),H.init(),K.init();new f({defaultIconURL:"/Static/Favicon/apple-touch-icon.png"})}}});
=======
<<<<<<< HEAD
define(["jquery","AX","FastClick","AccordianMenu","ScreenTest","AutoScroll","Tab","Dialog","AutoHeight","TemporaryHide","MobileDetect","QRcodeGen"],function(n,t,e,o,i,r,a,c,s,u,l,d){"use strict";var f={AJAXRequestPrefix:"api-"},h=!1,v=!1,p=!1,m=window,g=document,y=n(m),C=n(g),w=n("body"),b=t.Util.log,x=function(){i.init(),h=i.screen.bIsMobileMode,v=i.screen.bIsTabletMode,p=i.screen.bIsDesktopMode;var n=i.add;return{add:n}}(),k=function(){var t={},e={selector:".auto-height"},o=function(){n.each(i,function(){this.update()})},i=[],r=function(o){t=n.extend({},e,o),n(t.selector).each(function(){var n=new s(this);i.push(n)})};return{update:o,init:r}}(),A=function(){var n=function(){w.hasClass("no-scroll")||w.addClass("no-scroll")},t=function(){w.hasClass("no-scroll")&&w.removeClass("no-scroll")},e=function(){};return{noScroll:n,scroll:t,init:e}}();!function(){var t=new l(m.navigator.userAgent),e=!!t.version("MicroMessenger");e||p||n(".footer #footer-weixin-id").attr("href","#weixinQRcodeDialog").attr("data-toggle","dialog")}();var S=(function(){var t,e=n(".header"),o={autoHideHeight:150},i=function(){e.addClass("hide")},r=function(){e.removeClass("hide")},a=function(){var n=new l(m.navigator.userAgent),t=n.version("MicroMessenger");return"AndroidOS"===n.os()&&!!t}(),c=function(n){if(!p){var t=y.scrollTop();n>0?t>=o.autoHideHeight&&i():r()}},s=function(){a&&(e.removeClass("scroll"),e.next(".content").css("margin-top",87))},u=function(){a&&(e.addClass("scroll"),e.next(".content").css("margin-top",0))},d=function(){t=y.scrollTop(),y.on("scroll",function(){var n=y.scrollTop(),e=n-t;return 0===e?!1:(c(e),void(t=n))})},f=function(){a?u():d()};return f(),{fixed:s,scroll:u}}(),function(){var t={},e={openCall:null,closeCall:null},o=n(".search-panel"),i=(n(".top-nav .search .icon"),function(){return o.hasClass("show")?a():r(),!1}),r=function(){p&&n("#searchInput").trigger("focus"),o.addClass("show"),A.noScroll(),t.openCall&&t.openCall()},a=function(){o.removeClass("show"),!n(".nav").hasClass("show"),A.scroll(),t.closeCall&&t.closeCall()},c=function(){p&&a()},s=function(o){t=n.extend({},e,o),C.on("click",".search,.search-cancel a",i),C.on("blur","#searchInput",c)};return{open:r,close:a,init:s}}()),$=function(){var t={},e={beforeSearch:null,$input:n("#searchInput"),searchRequestUrl:"/searchresults/?query="},o=function(n){var t=/^\s+$/g;return t.test(n)||""===n},i=function(){var n=t.$input.val();if(!o(n)){var e=t.searchRequestUrl+encodeURIComponent(n);t.beforeSearch&&t.beforeSearch(n),m.location=e}},r=function(){y.on("keyup",function(n){"13"==n.keyCode&&i()})},a=function(o){t=n.extend({},e,o),r()};return{init:a}}(),q=function(){var e=function(){this.defaults={keywordCountLimit:10,localDataName:"searchHistory",$container:n(".search-history ul"),$clearButton:n(".search-history .clear-btn"),searchRequestUrl:"/searchresults/?query="},this.template='<li><a class="text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a><i class="icon icon-close"></i></li>'};e.prototype.init=function(t){this.config=n.extend({},this.defaults,t),this.bind(),this.update()},e.prototype.update=function(){this._fGetLocalKeywords(),this.render()},e.prototype.render=function(){var e="",o=this,i=this._fGetLocalKeywords();n.each(i,function(){e+=t.Util.Template(o.template,{url:o.config.searchRequestUrl+encodeURIComponent(this),keyword:this})}),this.config.$container.empty(),this.config.$container.append(e)},e.prototype._find=function(t){var e=this._fGetLocalKeywords();return n.inArray(t,e)},e.prototype.save=function(n){if(-1==this._find(n)){var e=this._fGetLocalKeywords();e.length<this.config.keywordCountLimit?e.unshift(n):(e.pop(),e.unshift(n)),t.Storage.set(this.config.localDataName,e),this.update()}},e.prototype.clearAll=function(n){var e=n.data;return t.Storage.clear(e.config.localDataName),e.update(),!1},e.prototype.remove=function(t){var e=t.data,o=n(t.target).prev("a"),i=o.attr("title");return e.del(i),!1},e.prototype.del=function(n){var e=this._find(n);if(-1!==e){var o=this._fGetLocalKeywords();o.splice(e,1),t.Storage.set(this.config.localDataName,o),this.update()}},e.prototype.bind=function(){var n=this;C.on("click",n.config.$clearButton.selector,n,n.clearAll),n.config.$container.on("click",".icon-close",n,n.remove)},e.prototype._fGetLocalKeywords=function(){return t.Storage.get(this.config.localDataName)||[]};var o=new e,i=function(){o.init()},r=function(n){o.save(n)};return{save:r,init:i}}(),U=function(){var e={},o={$container:n(".search-panel .hot-tag"),requestUrl:"/"+f.AJAXRequestPrefix+"hotkeywords",requestParam:"topK",keywordsCount:9,searchUrl:"/searchresults/?query=",template:'<a class="btn btn-link btn-default text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a>'},i=function(o){var i="";return n.each(o,function(){var n=this,o=e.searchUrl+encodeURIComponent(n);i+=t.Util.Template(e.template,{url:o,keyword:n})}),i},r=function(n){e.$container.empty(),e.$container.append(n)},a=function(){var t={};t[e.requestParam]=e.keywordsCount,n.ajax({url:e.requestUrl,method:"POST",data:t,dataType:"json"}).done(function(n){r(i(n))}).fail(function(n){b("Get top search keywords failed.")})},c=function(t){e=n.extend({},o,t),a()};return{init:c}}(),_=function(){var t=n(".nav"),e=n(".nav > ul > li > a"),o=t.find(".sub-menu"),i=function(){return t.hasClass("show")?c():r(),!1},r=function(){t.addClass("show"),S.close(),A.noScroll()},a=function(){t.removeClass("show"),e.removeClass("active")},c=function(){a(),A.scroll()},s=function(){return 0==!n(this).next(".sub-menu").length?(e.removeClass("active"),n(this).addClass("active"),o.removeClass("show"),n(this).next(".sub-menu").addClass("show"),A.noScroll(),!1):void 0},u=function(){p&&(e.removeClass("active"),o.removeClass("show"),c(),A.scroll())},l=function(){o.find("dl").each(function(){var t=n(this),e=t.find("dt").length;e%2&&t.addClass("odd-child"),d(t)})},d=function(){o.find(".menu-child").each(function(){var t=n(this);t.on("mousewheel",function(t){if(n(this).hasClass("scrollable")){var e=t.originalEvent,o=e.wheelDelta||-e.detail;this.scrollTop+=30*(0>o?1:-1),t.preventDefault()}})})},f=function(){n(this).prev("dt").toggleClass("mouse-hover")},h=function(){var t=n(this).prev("dt").find("a").attr("href");return m.location=t,!1},v=function(){var n=m.location.href,e={"/home/features/":"product","/pricing/":"price","/solutions/":"solutions","/partnerancasestudy/":"partnerAndCase","/isv-plan/":"partnerAndCase","/starter-guide/":"document","/video-center/":"document","/documentation/":"document","/develop/":"document","/blog/":"community","/community/":"community","/support/":"support","/icp/":"support","/projectoxford/":"projectoxford"},o=function(){for(var t in e)if(n.indexOf(t)>-1)return e[t]};o()?t.find(".nav-"+o()).addClass("current"):t.find(".nav-index").addClass("current")},g=function(){C.on("click",".nav-toggle",i),C.on("click",".nav > ul > li > a",s),C.on("click",".content",u),C.on("mouseover",".nav .sub-menu dl dd",f),C.on("mouseout",".nav .sub-menu dl dd",f),C.on("click",".nav .sub-menu dl dd",h),l(),d(),v()};return{hide:a,open:r,close:c,init:g}}(),T=function(){var t=[],e=function(){n.each(t,function(){this.update()})},o=function(){n(".auto-scroll").each(function(n,e){var o=new r(this);t.push(o)})};return{update:e,init:o}}(),D=function(){var t={},e={$tabNav:n(".tab-nav")},o=function(o){t=n.extend({},e,o),t.$tabNav.each(function(){var t=new a(n(this));t.init()})};return{init:o}}(),R=function(){var t=function(){n('[data-toggle="dialog"]').each(function(){var t=new c(n(this));t.init()})};return{init:t}}(),M=function(){var n=function(){p||e.attach(g.body)};return{init:n}}(),I=function(){var t=[],e=function(){for(var n=0;n<t.length;n++)t[n].render()},i=function(){n(".accordian-menu").each(function(e,i){var r={$container:n(i)},a=new o;a.init(r),t.push(a)})};return{init:i,update:e}}(),G=function(){var t={rules:[[n(".header .nav .nav-partnerAndCase"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_video_center"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_icp"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-calculator-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-casestudy-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-icp-id"),"hidden-xs hidden-sm"]]},e=function(){var n=new u;n.init(t)};return{init:e}}(),L=function(){var t=function(){var t=m.location.href;return t.match(/(\/pricing\/calculator|\/icp\/|\/video-center\/|\/partnerancasestudy\/)/)?new d:void n(".common-sidebar").hide()};return{init:t}}();return{init:function(){n(g).ready(function(){n(".header .nav").removeClass("loading")}),A.init(),S.init({openCall:_.hide}),_.init(),T.init(),I.init(),k.init(),q.init(),U.init(),$.init({beforeSearch:function(n){q.save(n)}}),D.init(),R.init(),x.add(T.update),x.add(k.update),x.add(I.update),M.init(),G.init(),L.init()}}});
=======
define(["jquery","AX","FastClick","AccordianMenu","ScreenTest","AutoScroll","Tab","Dialog","AutoHeight","TemporaryHide","MobileDetect","QRcodeGen"],function(n,e,t,o,i,r,a,c,s,u,l,d){"use strict";var f={AJAXRequestPrefix:"api-"},h=!1,v=!1,p=!1,m=window,g=document,y=n(m),C=n(g),w=n("body"),b=e.Util.log,x=function(){i.init(),h=i.screen.bIsMobileMode,v=i.screen.bIsTabletMode,p=i.screen.bIsDesktopMode;var n=i.add;return{add:n}}(),k=function(){var e={},t={selector:".auto-height"},o=function(){n.each(i,function(){this.update()})},i=[],r=function(o){e=n.extend({},t,o),n(e.selector).each(function(){var n=new s(this);i.push(n)})};return{update:o,init:r}}(),A=function(){var n=function(){w.hasClass("no-scroll")||w.addClass("no-scroll")},e=function(){w.hasClass("no-scroll")&&w.removeClass("no-scroll")},t=function(){};return{noScroll:n,scroll:e,init:t}}();!function(){var e=new l(m.navigator.userAgent),t=!!e.version("MicroMessenger");t||p||n(".footer #footer-weixin-id").attr("href","#weixinQRcodeDialog").attr("data-toggle","dialog")}();var S=function(){var e,t=n(".header"),o={autoHideHeight:150},i=function(){t.addClass("hide")},r=function(){t.removeClass("hide")},a=function(){var n=new l(m.navigator.userAgent),e=n.version("MicroMessenger");return"AndroidOS"===n.os()&&!!e}(),c=function(n){if(!p){var e=y.scrollTop();n>0?e>=o.autoHideHeight&&i():r()}},s=function(){a&&(t.removeClass("scroll"),t.next(".content").css("margin-top",87))},u=function(){a&&(t.addClass("scroll"),t.next(".content").css("margin-top",0))},d=function(){e=y.scrollTop(),y.on("scroll",function(){var n=y.scrollTop(),t=n-e;return 0===t?!1:(c(t),void(e=n))})},f=function(){a?u():d()};return f(),{fixed:s,scroll:u}}(),$=function(){var e={},t={openCall:null,closeCall:null},o=n(".search-panel"),i=(n(".top-nav .search .icon"),function(){return o.hasClass("show")?a():r(),!1}),r=function(){p&&n("#searchInput").trigger("focus"),o.addClass("show"),S.fixed(),A.noScroll(),e.openCall&&e.openCall()},a=function(){o.removeClass("show"),n(".nav").hasClass("show")||S.scroll(),A.scroll(),e.closeCall&&e.closeCall()},c=function(){p&&a()},s=function(o){e=n.extend({},t,o),C.on("click",".search,.search-cancel a",i),C.on("blur","#searchInput",c)};return{open:r,close:a,init:s}}(),q=function(){var e={},t={beforeSearch:null,$input:n("#searchInput"),searchRequestUrl:"/searchresults/?query="},o=function(n){var e=/^\s+$/g;return e.test(n)||""===n},i=function(n){var t=e.searchRequestUrl+encodeURIComponent(n);e.beforeSearch&&e.beforeSearch(n),m.location=t},r=function(){y.on("keyup",function(n){if("13"==n.keyCode){var t=e.$input.val();if(o(t))return!1;i(t)}})},a=function(o){e=n.extend({},t,o),r()};return{init:a}}(),U=function(){var t=function(){this.defaults={keywordCountLimit:10,localDataName:"searchHistory",$container:n(".search-history ul"),$clearButton:n(".search-history .clear-btn"),searchRequestUrl:"/searchresults/?query="},this.template='<li><a class="text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a><i class="icon icon-close"></i></li>'};t.prototype.init=function(e){this.config=n.extend({},this.defaults,e),this.bind(),this.update()},t.prototype.update=function(){this._fGetLocalKeywords(),this.render()},t.prototype.render=function(){var t="",o=this,i=this._fGetLocalKeywords();n.each(i,function(){t+=e.Util.Template(o.template,{url:o.config.searchRequestUrl+encodeURIComponent(this),keyword:this})}),this.config.$container.empty(),this.config.$container.append(t)},t.prototype._find=function(e){var t=this._fGetLocalKeywords();return n.inArray(e,t)},t.prototype.save=function(n){if(-1==this._find(n)){var t=this._fGetLocalKeywords();t.length<this.config.keywordCountLimit?t.unshift(n):(t.pop(),t.unshift(n)),e.Storage.set(this.config.localDataName,t),this.update()}},t.prototype.clearAll=function(n){var t=n.data;return e.Storage.clear(t.config.localDataName),t.update(),!1},t.prototype.remove=function(e){var t=e.data,o=n(e.target).prev("a"),i=o.attr("title");return t.del(i),!1},t.prototype.del=function(n){var t=this._find(n);if(-1!==t){var o=this._fGetLocalKeywords();o.splice(t,1),e.Storage.set(this.config.localDataName,o),this.update()}},t.prototype.bind=function(){var n=this;C.on("click",n.config.$clearButton.selector,n,n.clearAll),n.config.$container.on("click",".icon-close",n,n.remove)},t.prototype._fGetLocalKeywords=function(){return e.Storage.get(this.config.localDataName)||[]};var o=new t,i=function(){o.init()},r=function(n){o.save(n)};return{save:r,init:i}}(),_=function(){var t={},o={$container:n(".search-panel .hot-tag"),requestUrl:"/"+f.AJAXRequestPrefix+"hotkeywords",requestParam:"topK",keywordsCount:9,searchUrl:"/searchresults/?query=",template:'<a class="btn btn-link btn-default text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a>'},i=function(o){var i="";return n.each(o,function(){var n=this,o=t.searchUrl+encodeURIComponent(n);i+=e.Util.Template(t.template,{url:o,keyword:n})}),i},r=function(n){t.$container.empty(),t.$container.append(n)},a=function(){var e={};e[t.requestParam]=t.keywordsCount,n.ajax({url:t.requestUrl,method:"POST",data:e,dataType:"json"}).done(function(n){r(i(n))}).fail(function(n){b("Get top search keywords failed.")})},c=function(e){t=n.extend({},o,e),a()};return{init:c}}(),T=function(){var e=n(".nav"),t=n(".nav > ul > li > a"),o=e.find(".sub-menu"),i=function(){return e.hasClass("show")?c():r(),!1},r=function(){e.addClass("show"),S.fixed(),$.close(),A.noScroll()},a=function(){e.removeClass("show"),t.removeClass("active")},c=function(){a(),S.scroll(),A.scroll()},s=function(){return 0==!n(this).next(".sub-menu").length?(t.removeClass("active"),n(this).addClass("active"),o.removeClass("show"),n(this).next(".sub-menu").addClass("show"),A.noScroll(),!1):void 0},u=function(){p&&(t.removeClass("active"),o.removeClass("show"),c(),A.scroll())},l=function(){o.find("dl").each(function(){var e=n(this),t=e.find("dt").length;t%2&&e.addClass("odd-child"),d(e)})},d=function(){o.find(".menu-child").each(function(){var e=n(this);e.on("mousewheel",function(e){if(n(this).hasClass("scrollable")){var t=e.originalEvent,o=t.wheelDelta||-t.detail;this.scrollTop+=30*(0>o?1:-1),e.preventDefault()}})})},f=function(){n(this).prev("dt").toggleClass("mouse-hover")},h=function(){var e=n(this).prev("dt").find("a").attr("href");return m.location=e,!1},v=function(){var n=m.location.href,t={"/home/features/":"product","/pricing/":"price","/solutions/":"solutions","/partnerancasestudy/":"partnerAndCase","/isv-plan/":"partnerAndCase","/starter-guide/":"document","/video-center/":"document","/documentation/":"document","/develop/":"document","/blog/":"community","/community/":"community","/support/":"support","/icp/":"support","/projectoxford/":"projectoxford"},o=function(){for(var e in t)if(n.indexOf(e)>-1)return t[e]};o()?e.find(".nav-"+o()).addClass("current"):e.find(".nav-index").addClass("current")},g=function(){C.on("click",".nav-toggle",i),C.on("click",".nav > ul > li > a",s),C.on("click",".content",u),C.on("mouseover",".nav .sub-menu dl dd",f),C.on("mouseout",".nav .sub-menu dl dd",f),C.on("click",".nav .sub-menu dl dd",h),l(),d(),v()};return{hide:a,open:r,close:c,init:g}}(),D=function(){var e=[],t=function(){n.each(e,function(){this.update()})},o=function(){n(".auto-scroll").each(function(n,t){var o=new r(this);e.push(o)})};return{update:t,init:o}}(),R=function(){var e={},t={$tabNav:n(".tab-nav")},o=function(o){e=n.extend({},t,o),e.$tabNav.each(function(){var e=new a(n(this));e.init()})};return{init:o}}(),M=function(){var e=function(){n('[data-toggle="dialog"]').each(function(){var e=new c(n(this));e.init()})};return{init:e}}(),I=function(){var n=function(){p||t.attach(g.body)};return{init:n}}(),G=function(){var e=[],t=function(){for(var n=0;n<e.length;n++)e[n].render()},i=function(){n(".accordian-menu").each(function(t,i){var r={$container:n(i)},a=new o;a.init(r),e.push(a)})};return{init:i,update:t}}(),L=function(){var e={rules:[[n(".header .nav .nav-partnerAndCase"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_video_center"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_icp"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-calculator-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-casestudy-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-icp-id"),"hidden-xs hidden-sm"]]},t=function(){var n=new u;n.init(e)};return{init:t}}(),H=function(){var e=function(){var e=m.location.href;return e.match(/(\/pricing\/calculator|\/icp\/|\/video-center\/|\/partnerancasestudy\/)/)?new d:void n(".common-sidebar").hide()};return{init:e}}();return{init:function(){n(g).ready(function(){n(".header .nav").removeClass("loading")}),A.init(),$.init({openCall:T.hide}),T.init(),D.init(),G.init(),k.init(),U.init(),_.init(),q.init({beforeSearch:function(n){U.save(n)}}),R.init(),M.init(),x.add(D.update),x.add(k.update),x.add(G.update),I.init(),L.init(),H.init()}}});
>>>>>>> feature/left-navigation-child-link
>>>>>>> stage
=======
define(["jquery","AX","FastClick","AccordianMenu","ScreenTest","AutoScroll","Tab","Dialog","AutoHeight","TemporaryHide","MobileDetect","QRcodeGen"],function(n,e,t,o,i,r,a,c,s,u,l,d){"use strict";var f={AJAXRequestPrefix:"api-"},h=!1,v=!1,p=!1,m=window,g=document,y=n(m),C=n(g),w=n("body"),b=e.Util.log,x=function(){i.init(),h=i.screen.bIsMobileMode,v=i.screen.bIsTabletMode,p=i.screen.bIsDesktopMode;var n=i.add;return{add:n}}(),k=function(){var e={},t={selector:".auto-height"},o=function(){n.each(i,function(){this.update()})},i=[],r=function(o){e=n.extend({},t,o),n(e.selector).each(function(){var n=new s(this);i.push(n)})};return{update:o,init:r}}(),A=function(){var n=function(){w.hasClass("no-scroll")||w.addClass("no-scroll")},e=function(){w.hasClass("no-scroll")&&w.removeClass("no-scroll")},t=function(){};return{noScroll:n,scroll:e,init:t}}();!function(){var e=new l(m.navigator.userAgent),t=!!e.version("MicroMessenger");t||p||n(".footer #footer-weixin-id").attr("href","#weixinQRcodeDialog").attr("data-toggle","dialog")}();var S=function(){var e,t=n(".header"),o={autoHideHeight:150},i=function(){t.addClass("hide")},r=function(){t.removeClass("hide")},a=function(){var n=new l(m.navigator.userAgent),e=n.version("MicroMessenger");return"AndroidOS"===n.os()&&!!e}(),c=function(n){if(!p){var e=y.scrollTop();n>0?e>=o.autoHideHeight&&i():r()}},s=function(){a&&(t.removeClass("scroll"),t.next(".content").css("margin-top",87))},u=function(){a&&(t.addClass("scroll"),t.next(".content").css("margin-top",0))},d=function(){e=y.scrollTop(),y.on("scroll",function(){var n=y.scrollTop(),t=n-e;return 0===t?!1:(c(t),void(e=n))})},f=function(){a?u():d()};return f(),{fixed:s,scroll:u}}(),$=function(){var e={},t={openCall:null,closeCall:null},o=n(".search-panel"),i=(n(".top-nav .search .icon"),function(){return o.hasClass("show")?a():r(),!1}),r=function(){p&&n("#searchInput").trigger("focus"),o.addClass("show"),S.fixed(),A.noScroll(),e.openCall&&e.openCall()},a=function(){o.removeClass("show"),n(".nav").hasClass("show")||S.scroll(),A.scroll(),e.closeCall&&e.closeCall()},c=function(){p&&a()},s=function(o){e=n.extend({},t,o),C.on("click",".search,.search-cancel a",i),C.on("blur","#searchInput",c)};return{open:r,close:a,init:s}}(),q=function(){var e={},t={beforeSearch:null,$input:n("#searchInput"),searchRequestUrl:"/searchresults/?query="},o=function(n){var e=/^\s+$/g;return e.test(n)||""===n},i=function(n){var t=e.searchRequestUrl+encodeURIComponent(n);e.beforeSearch&&e.beforeSearch(n),m.location=t},r=function(){y.on("keyup",function(n){if("13"==n.keyCode){var t=e.$input.val();if(o(t))return!1;i(t)}})},a=function(o){e=n.extend({},t,o),r()};return{init:a}}(),U=function(){var t=function(){this.defaults={keywordCountLimit:10,localDataName:"searchHistory",$container:n(".search-history ul"),$clearButton:n(".search-history .clear-btn"),searchRequestUrl:"/searchresults/?query="},this.template='<li><a class="text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a><i class="icon icon-close"></i></li>'};t.prototype.init=function(e){this.config=n.extend({},this.defaults,e),this.bind(),this.update()},t.prototype.update=function(){this._fGetLocalKeywords(),this.render()},t.prototype.render=function(){var t="",o=this,i=this._fGetLocalKeywords();n.each(i,function(){t+=e.Util.Template(o.template,{url:o.config.searchRequestUrl+encodeURIComponent(this),keyword:this})}),this.config.$container.empty(),this.config.$container.append(t)},t.prototype._find=function(e){var t=this._fGetLocalKeywords();return n.inArray(e,t)},t.prototype.save=function(n){if(-1==this._find(n)){var t=this._fGetLocalKeywords();t.length<this.config.keywordCountLimit?t.unshift(n):(t.pop(),t.unshift(n)),e.Storage.set(this.config.localDataName,t),this.update()}},t.prototype.clearAll=function(n){var t=n.data;return e.Storage.clear(t.config.localDataName),t.update(),!1},t.prototype.remove=function(e){var t=e.data,o=n(e.target).prev("a"),i=o.attr("title");return t.del(i),!1},t.prototype.del=function(n){var t=this._find(n);if(-1!==t){var o=this._fGetLocalKeywords();o.splice(t,1),e.Storage.set(this.config.localDataName,o),this.update()}},t.prototype.bind=function(){var n=this;C.on("click",n.config.$clearButton.selector,n,n.clearAll),n.config.$container.on("click",".icon-close",n,n.remove)},t.prototype._fGetLocalKeywords=function(){return e.Storage.get(this.config.localDataName)||[]};var o=new t,i=function(){o.init()},r=function(n){o.save(n)};return{save:r,init:i}}(),_=function(){var t={},o={$container:n(".search-panel .hot-tag"),requestUrl:"/"+f.AJAXRequestPrefix+"hotkeywords",requestParam:"topK",keywordsCount:9,searchUrl:"/searchresults/?query=",template:'<a class="btn btn-link btn-default text-limit" href="<%=url%>" title="<%=keyword%>"><%=keyword%></a>'},i=function(o){var i="";return n.each(o,function(){var n=this,o=t.searchUrl+encodeURIComponent(n);i+=e.Util.Template(t.template,{url:o,keyword:n})}),i},r=function(n){t.$container.empty(),t.$container.append(n)},a=function(){var e={};e[t.requestParam]=t.keywordsCount,n.ajax({url:t.requestUrl,method:"POST",data:e,dataType:"json"}).done(function(n){r(i(n))}).fail(function(n){b("Get top search keywords failed.")})},c=function(e){t=n.extend({},o,e),a()};return{init:c}}(),T=function(){var e=n(".nav"),t=n(".nav > ul > li > a"),o=e.find(".sub-menu"),i=function(){return e.hasClass("show")?c():r(),!1},r=function(){e.addClass("show"),S.fixed(),$.close(),A.noScroll()},a=function(){e.removeClass("show"),t.removeClass("active")},c=function(){a(),S.scroll(),A.scroll()},s=function(){return 0==!n(this).next(".sub-menu").length?(t.removeClass("active"),n(this).addClass("active"),o.removeClass("show"),n(this).next(".sub-menu").addClass("show"),A.noScroll(),!1):void 0},u=function(){p&&(t.removeClass("active"),o.removeClass("show"),c(),A.scroll())},l=function(){o.find("dl").each(function(){var e=n(this),t=e.find("dt").length;t%2&&e.addClass("odd-child"),d(e)})},d=function(){o.find(".menu-child").each(function(){var e=n(this);e.on("mousewheel",function(e){if(n(this).hasClass("scrollable")){var t=e.originalEvent,o=t.wheelDelta||-t.detail;this.scrollTop+=30*(0>o?1:-1),e.preventDefault()}})})},f=function(){n(this).prev("dt").toggleClass("mouse-hover")},h=function(){var e=n(this).prev("dt").find("a").attr("href");return m.location=e,!1},v=function(){var n=m.location.href,t={"/home/features/":"product","/pricing/":"price","/solutions/":"solutions","/partnerancasestudy/":"partnerAndCase","/isv-plan/":"partnerAndCase","/starter-guide/":"document","/video-center/":"document","/documentation/":"document","/develop/":"document","/blog/":"community","/community/":"community","/support/":"support","/icp/":"support","/projectoxford/":"projectoxford"},o=function(){for(var e in t)if(n.indexOf(e)>-1)return t[e]};o()?e.find(".nav-"+o()).addClass("current"):e.find(".nav-index").addClass("current")},g=function(){C.on("click",".nav-toggle",i),C.on("click",".nav > ul > li > a",s),C.on("click",".content",u),C.on("mouseover",".nav .sub-menu dl dd",f),C.on("mouseout",".nav .sub-menu dl dd",f),C.on("click",".nav .sub-menu dl dd",h),l(),d(),v()};return{hide:a,open:r,close:c,init:g}}(),D=function(){var e=[],t=function(){n.each(e,function(){this.update()})},o=function(){n(".auto-scroll").each(function(n,t){var o=new r(this);e.push(o)})};return{update:t,init:o}}(),R=function(){var e={},t={$tabNav:n(".tab-nav")},o=function(o){e=n.extend({},t,o),e.$tabNav.each(function(){var e=new a(n(this));e.init()})};return{init:o}}(),M=function(){var e=function(){n('[data-toggle="dialog"]').each(function(){var e=new c(n(this));e.init()})};return{init:e}}(),I=function(){var n=function(){p||t.attach(g.body)};return{init:n}}(),G=function(){var e=[],t=function(){for(var n=0;n<e.length;n++)e[n].render()},i=function(){n(".accordian-menu").each(function(t,i){var r={$container:n(i)},a=new o;a.init(r),e.push(a)})};return{init:i,update:t}}(),L=function(){var e={rules:[[n(".header .nav .nav-partnerAndCase"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_video_center"),"hidden-xs hidden-sm"],[n(".header .nav #nav_documentation_icp"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-calculator-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-casestudy-id"),"hidden-xs hidden-sm"],[n(".footer .footer-navigation #footer-icp-id"),"hidden-xs hidden-sm"]]},t=function(){var n=new u;n.init(e)};return{init:t}}(),H=function(){var e=function(){var e=m.location.href;return e.match(/(\/pricing\/calculator|\/icp\/|\/video-center\/|\/partnerancasestudy\/)/)?new d:void n(".common-sidebar").hide()};return{init:e}}();return{init:function(){n(g).ready(function(){n(".header .nav").removeClass("loading")}),A.init(),$.init({openCall:T.hide}),T.init(),D.init(),G.init(),k.init(),U.init(),_.init(),q.init({beforeSearch:function(n){U.save(n)}}),R.init(),M.init(),x.add(D.update),x.add(k.update),x.add(G.update),I.init(),L.init(),H.init()}}});
>>>>>>> stage
