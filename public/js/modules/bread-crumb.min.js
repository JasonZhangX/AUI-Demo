define(["jquery","AX","LanguageSwitch","Category"],function(t,e,n,i){"use strict";var a=e.Util.log,l={},o={dataURL:"https://wacnstoragestaging.blob.core.chinacloudapi.cn/tech-content/Content/",dataName:"breadcrumb.json",$Container:t(".bread-crumb"),linkTemplate:'<li><span>&gt;</span></li><li><a href="<%=link%>" title="<%=title%>"><%=title%></a></li>',categoryName:{documentation:{cn:"文档与资源",en:"Documentation & Resources"},solutions:{cn:"解决方案",en:"Solutions"}}},r=new i,c=r.getCategory(),d=function(){return t("tags").attr("ms.service")||""},u=function(e,n,i){if(a("sServiceName",e),e){var o=l.dataURL+c+"/"+l.dataName;t.ajax({type:"GET",url:o,dataType:"json"}).done(function(i){var a={};t.each(i,function(){return this.service===e?(a.title=this.title,a.link=this.link,void(a.child=this.child)):void 0}),n&&n(a)}).fail(function(){i&&i(),a("Bread crumb initialization failed","Can not load the JSON.")})}},s=function(){var t=l.$Container.find("ul"),e=n.language(),i=l.categoryName[c][e];t.find("span").text(i)},f=function(n){if(a("Bread crumb data",n),!t.isEmptyObject(n)){var i=e.Util.Template(l.linkTemplate,n);void 0!==n.child&&(i+=e.Util.Template(l.linkTemplate,n.child));var o=l.$Container.find("ul");o.find("li span").removeClass("hidden-all"),o.append(i)}},m=function(e){l=t.extend({},o,e),s(),u(d(),f)};return{init:m}});