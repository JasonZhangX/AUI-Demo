define(["jquery","AX"],function(t,e){"use strict";var n=e.Util.log,i=e.Base.extend({defaults:{$form:null,errorClass:"error",errorIconHTML:'<i class="icon icon-wrong"></i>',inputFieldClass:".input-container, .textarea-container",messages:{},rules:{required:function(){return/\S+/},maxlength:function(t){return new RegExp("^.{1,"+t+"}$","g")}}},init:function(e){this._config=t.extend({},this.defaults,e);var n=this.get("$form");null!==n&&(n.attr("novalidate","novalidate"),this.set("o$AllInputField",n.find("input, textarea, select").not(":input[type=button], :input[type=submit], :input[type=reset]")),this.set("passed",!1),this.bind())},getInputRule:function(t){var e={};return t.prop("required")&&(e.required=!0),t.attr("maxlength")&&(e.maxlength=t.prop("maxlength")),t.attr("pattern")&&(e.pattern=t.prop("pattern")),e},error:function(t){var e=this;t.parent(e.get("inputFieldClass")).append(e.get("errorIconHTML")).addClass(e.get("errorClass"))},validate:function(e){var i=this.getInputRule(e);if(!t.isEmptyObject(i)){var r=e.val(),s=this.get("rules"),a=this;n("oAttributes",i),t.each(i,function(t,n){if("required"===t&&i[t]===!0&&!s.required().test(r))return a.error(e),!1;if("maxlength"===t&&!s.maxlength(i[t]).test(r))return a.error(e),!1;if("pattern"===t){var l=new RegExp(i[t]);if(!l.test(r))return a.error(e),!1}})}},resetAll:function(){var e=this;this.get("$form").find(e.get("inputFieldClass")).each(function(){t(this).removeClass(e.get("errorClass")),t(this).find(".icon").remove()})},reset:function(t){var e=this;t.parent(e.get("inputFieldClass")).removeClass(e.get("errorClass")).find(".icon").remove()},disable:function(t){t.prop("disabled")||t.prop("disabled",!0)},disableAll:function(){var e=this;this.get("o$AllInputField").each(function(){e.disable(t(this))})},enable:function(t){t.prop("disabled")&&t.prop("disabled",!1)},enableAll:function(){var e=this;this.get("o$AllInputField").each(function(){e.enable(t(this))})},render:function(){var e=this;this.get("o$AllInputField").each(function(){e.validate(t(this))})},status:function(){var e=this,n=!0;this.get("o$AllInputField").each(function(){return t(this).parent(e.get("inputFieldClass")).hasClass(e.get("errorClass"))?n=!1:void 0}),this.set("passed",n)},submitHandle:function(){n("Validation Form Handle","Submit")},bind:function(){var e=this;this.get("$form").find(":input[type=submit]").on("click.Validation",function(){return e.resetAll(),e.render(),e.status(),e.get("passed")&&e.submitHandle(),e.get("passed")}),this.get("o$AllInputField").each(function(){t(this).on("focus.Validation",function(){n("change"),e.reset(t(this))})})}});return i});